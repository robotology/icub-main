<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE devices PUBLIC "-//YARP//DTD robotInterface 1.0//EN" "http://www.icub.org/DTD/robotInterfaceV1.0.dtd">

<devices robot="iCubExpHeadV3" build="1">
    <device name="devicename_head_calibrator" type="parametricCalibratorEth">
                <params file="general.xml" />
        <!-- davide: now is for 4 joints (only board 13), but later on we should extend it for the two boards of the head -->
        <!-- added comments with hints for the complete calibration when the head will be ready -->        
        <group name="GENERAL">
            <param name="joints"> 6 </param> <!-- 6 -->
            <param name="deviceName"> HeadV3_Calibrator </param>
        </group>

        <!-- add two columns in front of the others for board 12  -->
        <!-- random values a part form calib type...to be tuned -->
        <group name="CALIBRATION">
        <param name="calibrationType">  3           3           3            3            4            4        </param>
        <param name="calibration1">     666         666         666            666         8000        8000    </param>        
        <param name="calibration2">     999         999            999         999         3640.88        3640.88    </param>        
        <param name="calibration3">     0           0           32767.92    0            19114.62    28216.82 </param>        <!-- m.a.: in here we need an offset of 180deg (=180*182.044 if expressed in icubdegrees because we have the zero of encoder in range of movement --> 
        <param name="positionZero">     0.0         0.0         0.0            0.0            0.0            0.0        </param>        
        <param name="velocityZero">     10          10          20.0        20.0        20.0        20.0    </param>        
        <param name="maxPwm">           500         500         500            500         0            0        </param>        
        <param name="posZeroThreshold"> 90           90           2            2            2            2        </param>        
        </group>

        <group name="HOME">
        <param name="positionHome">     0           0           0            0            0            0          </param>
        <param name="velocityHome">     20          20          20            20          20            20        </param>
        </group>


        <param name="CALIB_ORDER"> (4) (5) </param>            <!-- now calibrating (in order, not together) only incremental encoder controlled joints -->

        <action phase="startup" level="10" type="calibrate">
            <param name="target">devicename_head_mc_wrapper</param>
        </action>

        <action phase="interrupt1" level="1" type="park">
            <param name="target">devicename_head_mc_wrapper</param>
        </action>

        <action phase="interrupt3" level="1" type="abort" />

    </device>
</devices>
